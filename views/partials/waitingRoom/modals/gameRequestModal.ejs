    <div id="gameRequestModal" class="stats-modal">
        <div class="stats-modal-content request-modal-content">
            <div class="stats-modal-header" id="requestModalHeader">
                <div class="stats-modal-title" id="requestModalTitle">대국신청</div>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <button class="btn btn-secondary" id="viewProfileBtn" style="display: none; padding: 6px 12px; font-size: 12px;" onclick="toggleProfilePanel()">프로필 보기</button>
                    <button class="close-modal" onclick="closeGameRequestModal()">&times;</button>
                </div>
            </div>
            <div class="request-modal-body">
                <div class="request-sidebar full-width">
                    <div class="request-category-title" id="requestCategoryTitle">전략바둑</div>
                    <div id="requestModeList" class="request-mode-list"></div>
                </div>
                <div class="request-main">
                    <!-- 설정 내용 -->
                    <div class="request-main-content" id="requestMainContent">
                        <!-- AI봇 대결 설정 (전략바둑에서만 표시) -->
                        <div class="settings-section ai-only-section" id="aiLevelSection" style="display: none;">
                            <div class="settings-section-title">AI 설정</div>
                            <div class="settings-row-grid-two">
                                <div class="setting-item">
                                    <label class="ai-battle-label">AI 단계</label>
                                    <select id="aiLevelSelect" class="form-select">
                                        <option value="1">1단계</option>
                                        <option value="2">2단계</option>
                                        <option value="3" selected>3단계</option>
                                        <option value="4">4단계</option>
                                        <option value="5">5단계</option>
                                        <option value="6">6단계</option>
                                        <option value="7">7단계</option>
                                        <option value="8">8단계</option>
                                        <option value="9">9단계</option>
                                        <option value="10">10단계</option>
                                    </select>
                                </div>
                                <div class="setting-item">
                                    <label class="ai-battle-label">돌 색상</label>
                                    <select id="colorSelect" class="form-select">
                                        <option value="black">흑(선수)</option>
                                        <option value="white">백(후수)</option>
                                        <option value="random">랜덤</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 기본 게임 설정 섹션 -->
                        <div class="settings-section" id="basicSettingsSection">
                            <div class="settings-section-title">기본 설정</div>
                            <div class="settings-row-grid-two" id="basicSettingsRow">
                                <div class="setting-item" id="boardSizeItem">
                                    <label class="ai-battle-label">바둑판 크기</label>
                                    <select id="boardSizeSelect" class="form-select">
                                        <option value="19" selected>19줄</option>
                                        <option value="13">13줄</option>
                                        <option value="9">9줄</option>
                                    </select>
                                </div>
                                <div class="setting-item" id="komiSettingItem" style="display: none;">
                                    <label class="ai-battle-label">덤(Komi)</label>
                                    <select id="komiSelect" class="form-select">
                                        <!-- 옵션은 JavaScript에서 동적으로 생성됨 -->
                                    </select>
                                </div>
                                <div class="setting-item" id="autoScoringItem" style="display: none;">
                                    <label class="ai-battle-label">경기종료 턴수</label>
                                    <select id="autoScoringMoveSelect" class="form-select">
                                        <!-- 동적으로 채워짐-->
                                    </select>
                                </div>
                                <!-- 제한 턴수 등 추가 설정은 게임모드별로 동적으로 추가됨 -->
                            </div>
                        </div>
                        
                        <!-- 시간 설정 섹션 -->
                        <div class="settings-section" id="timeSettingsSection" style="display: none;">
                            <div class="settings-section-title">시간 설정</div>
                            <div class="settings-row-grid" id="timeSettingsRow">
                                <div class="setting-item" id="timeLimitItem" style="display: none;">
                                    <label class="ai-battle-label">제한시간</label>
                                    <select id="timeLimitSelect" class="form-select">
                                        <option value="0">0분 (초읽기만)</option>
                                        <option value="5">5분</option>
                                        <option value="10" selected>10분</option>
                                        <option value="15">15분</option>
                                        <option value="20">20분</option>
                                        <option value="30">30분</option>
                                        <option value="60">60분</option>
                                    </select>
                                </div>
                                <div class="setting-item" id="timeIncrementItem" style="display: none;">
                                    <label class="ai-battle-label">추가시간 (초당)</label>
                                    <select id="timeIncrementSelect" class="form-select">
                                        <option value="5" selected>5초</option>
                                        <option value="10">10초</option>
                                        <option value="15">15초</option>
                                        <option value="20">20초</option>
                                    </select>
                                </div>
                                <div class="setting-item" id="byoyomiItem" style="display: none;">
                                    <label class="ai-battle-label">초읽기 시간</label>
                                    <select id="byoyomiSecondsSelect" class="form-select">
                                        <option value="10">10초</option>
                                        <option value="20">20초</option>
                                        <option value="30" selected>30초</option>
                                        <option value="40">40초</option>
                                        <option value="50">50초</option>
                                        <option value="60">60초</option>
                                    </select>
                                </div>
                                <div class="setting-item" id="byoyomiPeriodsItem" style="display: none;">
                                    <label class="ai-battle-label">초읽기 횟수</label>
                                    <select id="byoyomiPeriodsSelect" class="form-select">
                                        <option value="0">0회</option>
                                        <option value="1">1회</option>
                                        <option value="2">2회</option>
                                        <option value="3">3회</option>
                                        <option value="4">4회</option>
                                        <option value="5" selected>5회</option>
                                        <option value="6">6회</option>
                                        <option value="7">7회</option>
                                        <option value="8">8회</option>
                                        <option value="9">9회</option>
                                        <option value="10">10회</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 게임 모드별 설정 섹션 -->
                        <div class="settings-section mode-specific-settings-section" id="modeSpecificSettingsSection" style="display: none;">
                            <div class="settings-section-title" id="modeSpecificSettingsTitle">게임 모드 설정</div>
                            <div class="request-settings-grid" id="modeSpecificSettings">
                                <!-- 게임 모드별 설정 항목들은 동적으로 추가됨 -->
                            </div>
                        </div>
                        
                        <!-- 믹스바둑 규칙 섹션 (믹스바둑만) -->
                        <div class="mix-rules-section" id="mixRulesSection" style="display: none;">
                            <div class="mix-rules-section-title">믹스 규칙 (2개 이상 선택)</div>
                            <div class="mix-rules-grid" id="mixRulesGrid">
                                <!-- 믹스 체크박스 리스트가 동적으로 추가됨 -->
                            </div>
                            <div id="mixRuleSettings" style="width: 100%; display: none;">
                                <!-- 선택된 믹스모드별 설정 항목들은 동적으로 추가됨 -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="request-timer-container" id="requestTimerContainer">
                        <div class="request-timer-bar" id="requestTimerBar"></div>
                    </div>
                    <div class="request-timer-text" id="requestTimerText">30s</div>
                    
                    <div class="ai-battle-actions">
                        <div id="senderActionButtons" style="display: flex; gap: 12px; align-items: center;">
                            <button class="btn btn-primary" id="confirmRequestBtn">신청하기</button>
                            <button class="btn btn-secondary" onclick="closeGameRequestModal()">취소</button>
                        </div>
                        
                        <div id="receiverActionButtons" style="display: none; gap: 12px; align-items: center;">
                            <button class="btn btn-primary" id="acceptRequestBtn">수락</button>
                            <button class="btn btn-modify" id="modifyRequestBtn" style="display: block;" disabled>수정제안</button>
                            <button class="btn btn-danger" id="rejectRequestBtn">거절</button>
                        </div>
                    </div>
                </div>
                <div class="request-right-panel" id="requestRightPanel" style="display: none;">
                    <div id="targetUserInfo" class="target-user-info">
                        <div class="user-avatar-small" id="targetUserAvatar" style="cursor: pointer;" onclick="if(selectedTargetUser && selectedTargetUser.id) showProfileModal(selectedTargetUser.id)">?</div>
                        <div class="target-user-details">
                            <div id="targetUserNickname" class="target-nickname" style="cursor: pointer;" onclick="if(selectedTargetUser && selectedTargetUser.id) showProfileModal(selectedTargetUser.id)">상대 유저</div>
                            <div id="targetUserRating" class="target-rating">레이팅: -</div>
                            <div id="targetUserManner" class="target-rating" style="margin-top: 4px;">매너: -</div>
                            <div class="target-game-stats">
                                <div class="target-game-stats-title" id="targetGameStatsTitle" style="font-size: 12px; margin-bottom: 10px;">전략바둑 전적</div>
                                <div class="target-game-stats-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                                    <div class="target-stat-item" style="text-align: center;">
                                        <div class="target-stat-value" id="targetGameWins" style="font-size: 18px; font-weight: 700; color: #667eea;">0</div>
                                        <div class="target-stat-label" style="font-size: 11px; color: #64748b; margin-top: 4px;">승</div>
                                    </div>
                                    <div class="target-stat-item" style="text-align: center;">
                                        <div class="target-stat-value" id="targetGameLosses" style="font-size: 18px; font-weight: 700; color: #ef4444;">0</div>
                                        <div class="target-stat-label" style="font-size: 11px; color: #64748b; margin-top: 4px;">패</div>
                                    </div>
                                    <div class="target-stat-item" style="text-align: center;">
                                        <div class="target-stat-value" id="targetGameWinRate" style="font-size: 18px; font-weight: 700; color: #10b981;">0%</div>
                                        <div class="target-stat-label" style="font-size: 11px; color: #64748b; margin-top: 4px;">승률</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="stats-modal-options">
                <label><input type="checkbox" id="requestModalRememberPosition"><span>위치 기억</span></label>
            </div>
        </div>
    </div>
